@prefix bfo:  <http://purl.obolibrary.org/obo/BFO_> .
@prefix iao:  <http://purl.obolibrary.org/obo/IAO_> .
@prefix onto: <https://techcoop.com.br/ontomi#> .
@prefix owl:  <http://www.w3.org/2002/07/owl#> .
@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh:   <http://www.w3.org/ns/shacl#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .
@prefix dct:  <http://purl.org/dc/terms/> . 
@prefix vann: <http://purl.org/vocab/vann/> .

#################################################################
# Ontology header / metadados
#################################################################
<https://techcoop.com.br/ontomi>
  a owl:Ontology ;
  owl:versionIRI   <https://techcoop.com.br/ontomi/2025-10> ;
  owl:versionInfo  "1.1.0 (2025-10-27)" ;
  dct:title        "OntoMI: Ontology for Multiple Intelligences in Educational Texts"@en ,
                   "OntoMI: Ontologia para Inteligências Múltiplas em Textos Educacionais"@pt ;
  dct:isVersionOf  <https://techcoop.com.br/ontomi> ;
  dct:source       <https://techcoop.com.br/uploads/download/file/93/ontomi.ttl> ;
  dct:publisher    <https://orcid.org/0009-0009-3964-9185> ;
  dct:creator      "Jefferson Rodrigo Speck" ;
  dct:created      "2025-10-26"^^xsd:date ;
  dct:modified     "2025-10-27"^^xsd:date ;
  dct:license      <https://creativecommons.org/licenses/by/4.0/> ;
  vann:preferredNamespacePrefix "onto" ;
  vann:preferredNamespaceUri    "https://techcoop.com.br/ontomi#" ;
  owl:imports
      <http://purl.obolibrary.org/obo/bfo.owl> ,
      <http://purl.obolibrary.org/obo/iao.owl> ;
  rdfs:comment "Núcleo alinhado a BFO (Disposition/Process) e IAO (ICE/is about). Validação por SHACL. Perfil sugerido: OWL 2 EL + SHACL."@pt .

#################################################################
# Rótulos de topo (BFO/IAO) — coerência de prefixos
#################################################################
bfo:0000015 rdfs:label "Process"@en .
bfo:0000016 rdfs:label "Disposition"@en .
iao:0000030 rdfs:label "Information content entity"@en .
iao:0000136 rdfs:label "is about"@en .

#################################################################
# Núcleo OntoMI (classes) — labels & comments pt/en
#################################################################

onto:Intelligence a owl:Class ;
  rdfs:label "Intelligence"@en , "Inteligência"@pt ;
  rdfs:comment "Stable cognitive category in Gardner's Theory of Multiple Intelligences; modeled as a BFO disposition."@en ,
               "Categoria cognitiva estável segundo a Teoria das Inteligências Múltiplas de Gardner; modelada como uma disposição no BFO."@pt ;
  rdfs:subClassOf bfo:0000016 .

onto:IntelligenceDisposition a owl:Class ;
  rdfs:label "Intelligence Disposition"@en , "Disposição de inteligência"@pt ;
  rdfs:comment "Type of realizable cognitive disposition aligned with Gardner's MI; realizable entity in the BFO sense."@en ,
              "Tipo de disposição cognitiva realizável alinhada à TIM de Gardner; entidade realizável no sentido do BFO."@pt ;
  rdfs:subClassOf bfo:0000016 ; # BFO:Disposition
  iao:0000115 "Realizable cognitive disposition as per Gardner's MI; realizable entity in BFO."@en .

# Específicas (TIM)
onto:LinguisticIntelligence a owl:Class ;
  rdfs:label "Linguistic"@en , "Linguística"@pt ;
  rdfs:comment "Disposition related to sensitivity to language, word choice, and verbal reasoning."@en ,
               "Disposição relacionada à sensibilidade à linguagem, escolha de palavras e raciocínio verbal."@pt ;
  rdfs:subClassOf onto:IntelligenceDisposition .

onto:LogicalMathematicalIntelligence a owl:Class ;
  rdfs:label "Logical-Mathematical"@en , "Lógico-matemática"@pt ;
  rdfs:comment "Disposition related to formal reasoning, logic, numbers, and abstract relations."@en ,
               "Disposição relacionada ao raciocínio formal, lógica, números e relações abstratas."@pt ;
  rdfs:subClassOf onto:IntelligenceDisposition .

onto:SpatialIntelligence a owl:Class ;
  rdfs:label "Spatial"@en , "Espacial-visual"@pt ;
  rdfs:comment "Disposition related to mental imagery, spatial reasoning, and visual pattern handling."@en ,
               "Disposição relacionada à imagética mental, raciocínio espacial e manipulação de padrões visuais."@pt ;
  rdfs:subClassOf onto:IntelligenceDisposition .

onto:BodilyKinestheticIntelligence a owl:Class ;
  rdfs:label "Bodily-Kinesthetic"@en , "Cinestésico-corporal"@pt ;
  rdfs:comment "Disposition related to motor control, tactile/kinesthetic learning, and embodied performance."@en ,
               "Disposição relacionada ao controle motor, aprendizagem tátil/cinestésica e performance corporal."@pt ;
  rdfs:subClassOf onto:IntelligenceDisposition .

onto:MusicalIntelligence a owl:Class ;
  rdfs:label "Musical"@en , "Musical"@pt ;
  rdfs:comment "Disposition related to rhythm, melody, harmony, and auditory pattern recognition."@en ,
               "Disposição relacionada a ritmo, melodia, harmonia e reconhecimento de padrões auditivos."@pt ;
  rdfs:subClassOf onto:IntelligenceDisposition .

onto:InterpersonalIntelligence a owl:Class ;
  rdfs:label "Interpersonal"@en , "Interpessoal"@pt ;
  rdfs:comment "Disposition related to understanding others' intentions, emotions, and social cues."@en ,
               "Disposição relacionada à compreensão de intenções, emoções e sinais sociais de outras pessoas."@pt ;
  rdfs:subClassOf onto:IntelligenceDisposition .

onto:IntrapersonalIntelligence a owl:Class ;
  rdfs:label "Intrapersonal"@en , "Intrapessoal"@pt ;
  rdfs:comment "Disposition related to self-knowledge, introspection, and regulation of one's own emotions."@en ,
               "Disposição relacionada ao autoconhecimento, introspecção e regulação das próprias emoções."@pt ;
  rdfs:subClassOf onto:IntelligenceDisposition .

onto:NaturalistIntelligence a owl:Class ;
  rdfs:label "Naturalist"@en , "Naturalista"@pt ;
  rdfs:comment "Disposition related to recognizing and classifying patterns in nature and the environment."@en ,
               "Disposição relacionada ao reconhecimento e classificação de padrões na natureza e no ambiente."@pt ;
  rdfs:subClassOf onto:IntelligenceDisposition .

# ICEs (IAO)
onto:ExplanationElement a owl:Class ;
  rdfs:label "Explanation Element"@en , "Elemento explicativo"@pt ;
  rdfs:comment "Abstract container for elements that help evoke intelligences (e.g., Keyword, ContextObject, DiscursiveStrategy)."@en ,
               "Container abstrato para elementos que ajudam a evocar inteligências (ex.: Palavra-chave, Objeto de contexto, Estratégia discursiva)."@pt ;
  rdfs:subClassOf iao:0000030 .

onto:Keyword a owl:Class ;
  rdfs:label "Keyword"@en , "Palavra-chave"@pt ;
  rdfs:comment "Salient lexical item used as evidence in evocation analysis."@en ,
               "Item lexical saliente usado como evidência na análise de evocação."@pt ;
  rdfs:subClassOf onto:ExplanationElement .

onto:ContextObject a owl:Class ;
  rdfs:label "Context Object"@en , "Objeto de contexto"@pt ;
  rdfs:comment "Physical/symbolic/situational object mentioned in the fragment that the content may be about."@en ,
               "Objeto físico/simbólico/situacional mencionado no fragmento sobre o qual o conteúdo pode ser."@pt ;
  rdfs:subClassOf onto:ExplanationElement .

onto:DiscursiveStrategy a owl:Class ;
  rdfs:label "Discursive Strategy"@en , "Estratégia discursiva"@pt ;
  rdfs:comment "Rhetorical-pedagogical form (e.g., analogy, dramatization, simulation) used in the explanation."@en ,
               "Forma retórico-pedagógica (ex.: analogia, dramatização, simulação) utilizada na explicação."@pt ;
  rdfs:subClassOf onto:ExplanationElement .

onto:ExplanationFragment a owl:Class ;
  rdfs:label "Explanation Fragment"@en , "Fragmento explicativo"@pt ;
  rdfs:comment "Textual unit of analysis (ICE) serving as the basis for heuristic inference."@en ,
               "Unidade textual de análise (ICE) que serve de base para a inferência heurística."@pt ;
  rdfs:subClassOf iao:0000030 .

onto:IntelligenceActivation a owl:Class ;
  rdfs:label "Intelligence Activation"@en , "Ativação de inteligência"@pt ;
  rdfs:comment "Reified assertion (ICE) representing an inferred activation of an intelligence within a fragment."@en ,
               "Asserção reificada (ICE) que representa a ativação inferida de uma inteligência em um fragmento."@pt ;
  rdfs:subClassOf iao:0000030 .

onto:EvocationProcess a owl:Class ;
  rdfs:label "Evocation Process"@en , "Processo de evocação"@pt ;
  rdfs:comment "Cognitive/interpretive event (occurrent) that can realize an intelligence disposition."@en ,
               "Evento cognitivo/interpretativo (ocorrente) que pode realizar uma disposição de inteligência."@pt ;
  rdfs:subClassOf bfo:0000015 .

onto:MIProfileVector a owl:Class ;
  rdfs:label "MI Profile Vector"@en , "Vetor de perfil MI"@pt ;
  rdfs:comment "Informational representation (ICE) of aggregated activations across intelligences, as an 8D percentage vector."@en ,
               "Representação informacional (ICE) das ativações agregadas entre as inteligências, como vetor percentual 8D."@pt ;
  rdfs:subClassOf iao:0000030 .

# Vocabulário de tipo de ativação
onto:ActivationType a owl:Class ;
  rdfs:label "Activation Type"@en , "Tipo de ativação"@pt ;
  rdfs:comment "Controlled vocabulary to qualify activation salience (primary/secondary)."@en ,
               "Vocabulário controlado para qualificar a saliência da ativação (primária/secundária)."@pt .

onto:Primary a owl:NamedIndividual , onto:ActivationType ;
  rdfs:label "primary"@en , "primária"@pt .

onto:Secondary a owl:NamedIndividual , onto:ActivationType ;
  rdfs:label "secondary"@en , "secundária"@pt .

onto:hasActivationType a owl:ObjectProperty , owl:FunctionalProperty ;
  rdfs:label "hasActivationType"@en , "temTipoDeAtivação"@pt ;
  rdfs:domain onto:IntelligenceActivation ;
  rdfs:range  onto:ActivationType .

#################################################################
# Propriedades (subpropriedades de iao:is about quando semânticas)
#################################################################
onto:usesElement a owl:ObjectProperty ;
  rdfs:label "usesElement"@en , "usaElemento"@pt ;
  rdfs:domain onto:ExplanationFragment ;
  rdfs:range  onto:ExplanationElement ;
  rdfs:subPropertyOf iao:0000136 .

onto:evokesIntelligence a owl:ObjectProperty ;
  rdfs:label "evokesIntelligence"@en , "evocaInteligência"@pt ;
  rdfs:domain onto:ExplanationElement ;
  rdfs:range  onto:IntelligenceDisposition ;
  rdfs:subPropertyOf iao:0000136 .

onto:isAboutFragment a owl:ObjectProperty ;
  rdfs:label "isAboutFragment"@en , "éSobreFragmento"@pt ;
  rdfs:domain onto:IntelligenceActivation ;
  rdfs:range  onto:ExplanationFragment ;
  rdfs:subPropertyOf iao:0000136 .

# Ligação principal via topo:
#   IntelligenceActivation -- iao:is about --> IntelligenceDisposition
# Ex.: _:act iao:0000136 onto:LinguisticIntelligence .

onto:hasActivation a owl:ObjectProperty ;
  rdfs:label "hasActivation"@en , "temAtivação"@pt ;
  rdfs:comment "Links a fragment to a reified activation assertion."@en ,
               "Liga um fragmento a uma asserção reificada de ativação."@pt ;
  rdfs:domain onto:ExplanationFragment ;
  rdfs:range  onto:IntelligenceActivation .

onto:isActivationOf a owl:ObjectProperty ;
  owl:inverseOf onto:hasActivation ;
  rdfs:domain onto:IntelligenceActivation ;
  rdfs:range  onto:ExplanationFragment .  

onto:hasPrimaryActivation a owl:ObjectProperty , owl:FunctionalProperty ;
  rdfs:label "hasPrimaryActivation"@en , "temAtivaçãoPrimária"@pt ;
  rdfs:domain onto:ExplanationFragment ;
  rdfs:range  onto:IntelligenceActivation ;
  rdfs:subPropertyOf onto:hasActivation .

onto:hasSecondaryActivation a owl:ObjectProperty ;
  rdfs:label "hasSecondaryActivation"@en , "temAtivaçãoSecundária"@pt ;
  rdfs:domain onto:ExplanationFragment ;
  rdfs:range  onto:IntelligenceActivation ;
  rdfs:subPropertyOf onto:hasActivation .

onto:denotesProcess a owl:ObjectProperty ;
  rdfs:label "denotesProcess"@en , "denotaProcesso"@pt ;
  rdfs:domain onto:IntelligenceActivation ;
  rdfs:range  onto:EvocationProcess .

onto:hasActivationScore a owl:DatatypeProperty , owl:FunctionalProperty ;
  rdfs:label "activation score"@en , "escore de ativação"@pt ;
  iao:0000115 "Intensidade da ativação inferida para uma instância de IntelligenceActivation (0..1, 0..100 ou escala definida pela aplicação)."@pt ;
  rdfs:domain onto:IntelligenceActivation ;
  rdfs:range  xsd:decimal .

onto:hasWeight a owl:DatatypeProperty ;
  rdfs:label "hasWeight"@en , "temPeso"@pt ;
  rdfs:domain onto:IntelligenceActivation ;
  rdfs:range  xsd:decimal .

onto:miVector a owl:DatatypeProperty , owl:FunctionalProperty ;
  rdfs:label "MI percentage vector (8D)"@en , "Vetor percentual de IM (8D)"@pt ;
  iao:0000115 "Resultado agregado das ativações por inteligência, representado como string com 8 valores percentuais, em ordem fixa: [Linguistic, Logical-Mathematical, Spatial-Visual, Bodily-Kinesthetic, Musical, Interpersonal, Intrapersonal, Naturalist]."@pt ;
  iao:0000116 "Derivado dos escores em onto:hasActivationScore das ativações reificadas associadas; consumidores podem calcular sob demanda."@pt ;
  rdfs:domain onto:MIProfileVector ;
  rdfs:range  xsd:string .

onto:hasProfileVector a owl:ObjectProperty , owl:FunctionalProperty ;
  rdfs:domain onto:ExplanationFragment ;
  rdfs:range  onto:MIProfileVector .

# 8 posições do vetor (0..1)
onto:hasLinguisticScore            a owl:DatatypeProperty , owl:FunctionalProperty ; rdfs:domain onto:MIProfileVector ; rdfs:range xsd:decimal .
onto:hasLogicalMathematicalScore   a owl:DatatypeProperty , owl:FunctionalProperty ; rdfs:domain onto:MIProfileVector ; rdfs:range xsd:decimal .
onto:hasSpatialScore               a owl:DatatypeProperty , owl:FunctionalProperty ; rdfs:domain onto:MIProfileVector ; rdfs:range xsd:decimal .
onto:hasBodilyKinestheticScore     a owl:DatatypeProperty , owl:FunctionalProperty ; rdfs:domain onto:MIProfileVector ; rdfs:range xsd:decimal .
onto:hasMusicalScore               a owl:DatatypeProperty , owl:FunctionalProperty ; rdfs:domain onto:MIProfileVector ; rdfs:range xsd:decimal .
onto:hasInterpersonalScore         a owl:DatatypeProperty , owl:FunctionalProperty ; rdfs:domain onto:MIProfileVector ; rdfs:range xsd:decimal .
onto:hasIntrapersonalScore         a owl:DatatypeProperty , owl:FunctionalProperty ; rdfs:domain onto:MIProfileVector ; rdfs:range xsd:decimal .
onto:hasNaturalistScore            a owl:DatatypeProperty , owl:FunctionalProperty ; rdfs:domain onto:MIProfileVector ; rdfs:range xsd:decimal .

#################################################################
# Axiomas auxiliares
#################################################################
[] a owl:Axiom ;
   owl:annotatedSource  onto:hasPrimaryActivation ;
   owl:annotatedProperty rdfs:comment ;
   owl:annotatedTarget "Convenção: toda ativação ligada por hasPrimaryActivation deve ter hasActivationType onto:Primary."@pt .

[] a owl:AllDisjointClasses ;
   owl:members ( 
     onto:LinguisticIntelligence
     onto:LogicalMathematicalIntelligence
     onto:SpatialIntelligence
     onto:BodilyKinestheticIntelligence
     onto:MusicalIntelligence
     onto:InterpersonalIntelligence
     onto:IntrapersonalIntelligence
     onto:NaturalistIntelligence
     onto:Keyword 
     onto:ContextObject 
     onto:DiscursiveStrategy     
   ) .

#################################################################
# SHACL (regras de validação de instâncias)
#################################################################

#################################################################
# 1) Advisory: evitar instanciar ExplanationElement diretamente
#################################################################
onto:ExplanationElementAdvisoryShape a sh:NodeShape ;
  sh:targetClass onto:ExplanationElement ;
  sh:severity sh:Warning ;
  sh:message "Instanciação direta de ExplanationElement não recomendada; use Keyword, ContextObject ou DiscursiveStrategy."@pt .

#################################################################
# 2) Fragmento deve ter usesElement OU hasActivation; e no máx. 1 primária
#################################################################
onto:ExplanationFragmentShape a sh:NodeShape ;
  sh:targetClass onto:ExplanationFragment ;
  sh:message "ExplanationFragment deve possuir pelo menos uma ligação semântica (usesElement) ou uma ativação (hasActivation)."@pt ;
  sh:or (
    [ sh:property [ sh:path onto:usesElement ;    sh:minCount 1 ] ]
    [ sh:property [ sh:path onto:hasActivation ;  sh:minCount 1 ] ]
  ) ;
  sh:property [
    sh:path onto:hasPrimaryActivation ;
    sh:maxCount 1 ;
    sh:message "Cada fragmento deve ter no máximo uma ativação primária."@pt
  ] .

#################################################################
# 3) Ativação de inteligência: is_about, tipo, score em [0,1]
#    + coerência entre hasPrimary/hasSecondary e hasActivationType
#################################################################
onto:IntelligenceActivationShape a sh:NodeShape ;
  sh:targetClass onto:IntelligenceActivation ;

  # (a-B) Deve ter iao:is_about apontando para:
  #      • uma INSTÂNCIA de (sub)classe de IntelligenceDisposition, OU
  #      • uma CLASSE que seja subclasse (transitiva) de IntelligenceDisposition.
  # Se nada disso for verdade, gera violação.
  sh:sparql [
    sh:message "IntelligenceActivation deve apontar (via iao:is about) para instância de (sub)classe de IntelligenceDisposition OU para uma classe que seja subclasse de IntelligenceDisposition."@pt ;
    sh:select """
      PREFIX iao:  <http://purl.obolibrary.org/obo/IAO_>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX onto: <https://techcoop.com.br/ontomi#>
      SELECT ?this WHERE {
        FILTER NOT EXISTS {
          ?this iao:0000136 ?x .
          {
            # Caso 1: ?x é instância de uma subclasse (ou da própria) IntelligenceDisposition
            ?x a/rdfs:subClassOf* onto:IntelligenceDisposition
          }
          UNION
          {
            # Caso 2: ?x é CLASSE subclasse (transitiva) de IntelligenceDisposition
            ?x rdfs:subClassOf+ onto:IntelligenceDisposition
          }
        }
      }
    """
  ] ;

  # (b) Tipo obrigatório em {Primary, Secondary}
  sh:property [
    sh:path onto:hasActivationType ;
    sh:minCount 1 ;
    sh:in ( onto:Primary onto:Secondary ) ;
    sh:message "IntelligenceActivation deve possuir um tipo válido (primária/secundária)."@pt
  ] ;

  # (c) Score em [0,1] (xsd:decimal)
  sh:property [
    sh:path onto:hasActivationScore ;
    sh:datatype xsd:decimal ;
    sh:minInclusive 0.0 ;
    sh:maxInclusive 1.0 ;
    sh:message "Scores de ativação devem estar em [0,1]."@pt
  ] ;

  # (d) Coerência: se fragmento liga via hasPrimaryActivation => tipo Primary
  sh:sparql [
    sh:message "Ativação ligada por hasPrimaryActivation deve ter tipo Primary."@pt ;
    sh:select """
      PREFIX onto: <https://techcoop.com.br/ontomi#>
      SELECT ?this WHERE {
        ?frag onto:hasPrimaryActivation ?this .
        FILTER NOT EXISTS { ?this onto:hasActivationType onto:Primary }
      }
    """
  ] ;

  # (e) Coerência: se fragmento liga via hasSecondaryActivation => tipo Secondary
  sh:sparql [
    sh:message "Ativação ligada por hasSecondaryActivation deve ter tipo Secondary."@pt ;
    sh:select """
      PREFIX onto: <https://techcoop.com.br/ontomi#>
      SELECT ?this WHERE {
        ?frag onto:hasSecondaryActivation ?this .
        FILTER NOT EXISTS { ?this onto:hasActivationType onto:Secondary }
      }
    """
  ] .

#################################################################
# 4) Vetor MI: ou miVector (string) OU os 8 campos atômicos;
#    regex básica para miVector (aviso)
#################################################################
onto:MIProfileVectorShape a sh:NodeShape ;
  sh:targetClass onto:MIProfileVector ;

  # OU tem miVector, OU tem os 8 campos atômicos
  sh:or (
    [ sh:property [ sh:path onto:miVector ; sh:minCount 1 ] ]
    [ sh:property
        [ sh:path onto:hasLinguisticScore           ; sh:minCount 1 ; sh:datatype xsd:decimal ; sh:minInclusive 0.0 ; sh:maxInclusive 1.0 ],
        [ sh:path onto:hasLogicalMathematicalScore  ; sh:minCount 1 ; sh:datatype xsd:decimal ; sh:minInclusive 0.0 ; sh:maxInclusive 1.0 ],
        [ sh:path onto:hasSpatialScore              ; sh:minCount 1 ; sh:datatype xsd:decimal ; sh:minInclusive 0.0 ; sh:maxInclusive 1.0 ],
        [ sh:path onto:hasBodilyKinestheticScore    ; sh:minCount 1 ; sh:datatype xsd:decimal ; sh:minInclusive 0.0 ; sh:maxInclusive 1.0 ],
        [ sh:path onto:hasMusicalScore              ; sh:minCount 1 ; sh:datatype xsd:decimal ; sh:minInclusive 0.0 ; sh:maxInclusive 1.0 ],
        [ sh:path onto:hasInterpersonalScore        ; sh:minCount 1 ; sh:datatype xsd:decimal ; sh:minInclusive 0.0 ; sh:maxInclusive 1.0 ],
        [ sh:path onto:hasIntrapersonalScore        ; sh:minCount 1 ; sh:datatype xsd:decimal ; sh:minInclusive 0.0 ; sh:maxInclusive 1.0 ],
        [ sh:path onto:hasNaturalistScore           ; sh:minCount 1 ; sh:datatype xsd:decimal ; sh:minInclusive 0.0 ; sh:maxInclusive 1.0 ]
    ]
  ) ;

  # Regex de formato do miVector (8 números separados por vírgula) — Warning
  sh:property [
    sh:path onto:miVector ;
    sh:pattern "^[0-9]+(\\.[0-9]+)?(,[0-9]+(\\.[0-9]+)?){7}$" ;
    sh:flags "i" ;
    sh:severity sh:Warning ;
    sh:message "miVector deve ter 8 valores numéricos separados por vírgulas (ex.: 18.29,46.34,35.37,0.00,0.00,0.00,0.00,0.00)."@pt
  ] .

